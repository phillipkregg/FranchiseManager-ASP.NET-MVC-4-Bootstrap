/*
* Kendo UI Web v2012.1.322 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(a,b){function J(a){a.preventDefault()}function I(a,b){return a.replace(/ /g,b+" ")}function H(a){return e.elementFromPoint(a.x.client,a.y.client)}function G(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}var c=window.kendo,d=c.support,e=window.document,f=a(e.documentElement),g=c.Class,h=c.ui.Widget,i=c.Observable,j=a.proxy,k=a.extend,l=c.getOffset,m={},n={},o,p="resize",q="mousedown",r="mousemove",s="mouseup mouseleave",t="keyup",u="dragstart",v="drag",w="dragend",x="dragcancel",y="dragenter",z="dragleave",A="drop",B="start",C="move",D="end",E="cancel",F="tap";d.touch&&(p="orientationchange",q="touchstart",r="touchmove",s="touchend touchcancel");var K=g.extend({init:function(a){this.axis=a},start:function(a,b){var c=this,d=a["page"+c.axis];c.startLocation=c.location=d,c.client=a["client"+c.axis],c.velocity=c.delta=0,c.timeStamp=b},move:function(a,b){var c=this,d=a["page"+c.axis];!d||(c.delta=d-c.location,c.location=d,c.client=a["client"+c.axis],c.initialDelta=d-c.startLocation,c.velocity=c.delta/(b-c.timeStamp),c.timeStamp=b)}}),L=i.extend({init:function(b,e){var g=this,h={},l,m="."+c.guid();e=e||{},l=g.filter=e.filter,g.threshold=e.threshold||0,b=a(b),i.fn.init.call(g),h={},h[I(r,m)]=j(g._move,g),h[I(s,m)]=j(g._end,g),k(g,{x:new K("X"),y:new K("Y"),element:b,surface:e.global?f:b,pressed:!1,eventMap:h,ns:m}),b.on(q,l,j(g._start,g)).on("dragstart",l,J),e.allowSelection||b.on("mousedown selectstart",l,J),d.touch&&g.surface[0].addEventListener("touchend",function(a){g.moved&&a.preventDefault()},!0),g.bind([F,B,C,D,E],e)},capture:function(){L.captured=!0},cancel:function(){this._cancel(),this.trigger(E)},_cancel:function(){this.pressed=!1,this.surface.off(this.ns)},_start:function(b){var c=this,d=c.filter,e=b.originalEvent,f=e&&e.changedTouches,g=f&&f[0];c.pressed||(d?c.target=a(b.target).is(d)?a(b.target):a(b.target).closest(d):c.target=c.element,c.pressed=!0,c.moved=!1,g&&(c.touchID=g.identifier),c._perAxis(B,g||b,b.timeStamp),c.surface.off(c.eventMap).on(c.eventMap),L.captured=!1)},_move:function(a){var b=this,c,d,e;!b.pressed||b._withEvent(a,function(f){b._perAxis(C,f,a.timeStamp);if(!b.moved){c=b.x.initialDelta,d=b.y.initialDelta,e=Math.sqrt(c*c+d*d);if(e<=b.threshold)return;if(!L.captured)b._trigger(B,a),b.moved=!0;else return b._cancel()}b.pressed&&b._trigger(C,a)})},_end:function(a){var b=this;!b.pressed||b._withEvent(a,function(){b._cancel(),b.moved?(b._trigger(D,a),b.moved=!1):b._trigger(F,a)})},_perAxis:function(a,b,c){this.x[a](b,c),this.y[a](b,c)},_trigger:function(a,b){var c={x:this.x,y:this.y,target:this.target,event:b};this.trigger(a,c)&&b.preventDefault()},_withEvent:function(a,b){var c=this,d=a.originalEvent,e=a.which,f=d&&d.changedTouches,g=f&&f.length;if(!f)return b(a);while(g){g--;if(f[g].identifier===c.touchID)return b(f[g])}}}),M=i.extend({init:function(a,b){var c=this;c.capture=!1,a[0].addEventListener(q,j(c._press,c),!0),a.on(s,j(c._release,c)),i.fn.init.call(c),c.bind(["press","release"],b||{})},_press:function(a){var b=this;b.trigger("press"),b.capture&&(a.preventDefault(),a.originalEvent&&a.originalEvent.preventDefault())},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),a.originalEvent&&a.originalEvent.preventDefault(),b.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),N=i.extend({init:function(b){var c=this;i.fn.init.call(c),a.extend(c,b),c.max=0,c.horizontal?(c.measure="width",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="height",c.scrollSize="scrollHeight",c.axis="y")},outOfBounds:function(a){return a>this.max||a<this.min},totalSize:function(){return this.element[0][this.scrollSize]},present:function(){return this.max-this.min},update:function(){var a=this;a.size=a.container[a.measure](),a.total=a.element[0][a.scrollSize],a.min=Math.min(a.max,a.size-a.total),a.trigger("change",a)}}),O=g.extend({init:function(b){var c=this,d=b.movable;c.x=new N(k({horizontal:!0},b)),c.y=new N(k({horizontal:!1},b)),a(window).bind(p,j(c.refresh,c))},refresh:function(){this.x.update(),this.y.update()}}),P=i.extend({init:function(a){var b=this;k(b,a),i.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;if(!!c.present()){if(f<c.min&&a<0||f>c.max&&a>0)a*=b.resistance;e.translateAxis(d,a),b.trigger("change",b)}}}),Q=g.extend({init:function(a){var b=this,c,d,e;k(b,{elastic:!0},a),e=b.elastic?.5:0,b.x=c=new P({axis:"x",dimension:b.dimensions.x,resistance:e,movable:b.movable}),b.y=d=new P({axis:"y",dimension:b.dimensions.y,resistance:e,movable:b.movable}),b.drag.bind(["move","end"],{move:function(a){if(c.dimension.present()||d.dimension.present())c.dragMove(a.x.delta),d.dragMove(a.y.delta),a.preventDefault()},end:function(a){a.preventDefault()}})}}),R=d.transitions.prefix+"Transform",S=Math.round,T;d.hasHW3D?T=function(a,b){return"translate3d("+S(a)+"px,"+S(b)+"px,0)"}:T=function(a,b){return"translate("+S(a)+"px,"+S(b)+"px)"};var U=i.extend({init:function(b){var c=this;i.fn.init.call(c),c.element=a(b),c.x=0,c.y=0,c._saveCoordinates(T(c.x,c.y))},translateAxis:function(a,b){this[a]+=b,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){k(this,a),this.refresh()},refresh:function(){var a=this,b=T(a.x,a.y);b!=a.coordinates&&(a.element[0].style[R]=b,a._saveCoordinates(b),a.trigger("change"))},_saveCoordinates:function(a){this.coordinates=a}}),V=h.extend({init:function(a,b){var c=this;h.fn.init.call(c,a,b);var d=c.options.group;d in n?n[d].push(c):n[d]=[c]},events:[y,z,A],options:{name:"DropTarget",group:"default"},_trigger:function(a,b){var c=this,d=m[c.options.group];if(d)return c.trigger(a,k({},b.event,{draggable:d}))},_over:function(a){this._trigger(y,a)},_out:function(a){this._trigger(z,a)},_drop:function(a){var b=this,c=m[b.options.group];c&&(c.dropped=!b._trigger(A,a))}}),W=h.extend({init:function(a,b){var d=this;h.fn.init.call(d,a,b),d.drag=new L(d.element,{global:!0,filter:d.options.filter,threshold:d.options.distance,start:j(d._start,d),move:j(d._drag,d),end:j(d._end,d),cancel:j(d._cancel,d)}),d.destroy=j(d._destroy,d),d.captureEscape=function(a){a.keyCode===c.keys.ESC&&(d._trigger(x,{event:a}),d.drag.cancel())}},events:[u,v,w,x],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,dropped:!1},_start:function(b){var c=this,d=c.options,f=d.hint;c.currentTarget=c.drag.target,c.currentTargetOffset=l(c.currentTarget);if(f){c.hint=a.isFunction(f)?a(f(c.currentTarget)):f;var g=l(c.currentTarget);c.hintOffset=g,c.hint.css({position:"absolute",zIndex:10010,left:g.x,top:g.y}).appendTo(e.body)}m[d.group]=c,c.dropped=!1,c._trigger(u,b)&&(c.drag.cancel(),c.destroy()),a(e).on(t,c.captureEscape)},updateHint:function(a){var b=this,c,d=b.initialOffset,e=b.options.cursorOffset;e?c={left:a.x.location+e.left,top:a.y.location+e.top}:(b.hintOffset.left+=a.x.delta,b.hintOffset.top+=a.y.delta,c=b.hintOffset),b.hint.css(c)},_drag:function(a){var b=this,c=b.options.cursorOffset;a.preventDefault(),b._withDropTarget(a,function(b){if(!b)o&&(o._trigger(z,a),o=null);else{if(o){if(b.element[0]===o.element[0])return;o._trigger(z,a)}b._trigger(y,a),o=b}}),b._trigger(v,a),b.hint&&b.updateHint(a)},_end:function(a){var b=this;b._withDropTarget(a,function(b){b&&(b._drop(a),o=null)}),b._trigger(w,a),b._cancel(a.event)},_cancel:function(a){var b=this;b.hint&&!b.dropped?b.hint.animate(b.currentTargetOffset,"fast",b.destroy):b.destroy()},_trigger:function(a,b){var c=this;return c.trigger(a,k({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget}))},_withDropTarget:function(b,c){var d=this,e,f,g=d.options,h=n[g.group];h&&h.length&&(e=H(b),d.hint&&G(d.hint,e)&&(d.hint.hide(),e=H(b),d.hint.show()),a.each(h,function(){var a=this,b=a.element[0];if(G(b,e)){f=a;return!1}}),c(f))},_destroy:function(){var b=this;b.hint&&b.hint.remove(),delete m[b.options.group],b.trigger("destroy"),a(e).off(t,b.captureEscape)}});c.ui.plugin(V),c.ui.plugin(W),c.Drag=L,c.Tap=M,k(c.ui,{Pane:Q,PaneDimensions:O,Movable:U})})(jQuery)