/*
* Kendo UI Web v2012.1.322 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(a,b){function K(b,c){return b===c||a.contains(b,c)}var c=window.kendo,d=c.ui,e=d.Widget,f=c.support,g=f.touch,h=c.getOffset,i=a.browser.msie&&a.browser.version<9,j="open",k="close",l="center",m="left",n="right",o="top",p="bottom",q="absolute",r="hidden",s="body",t="location",u="position",v="visible",w="fitted",x="effects",y="k-state-active",z="k-state-border",A=".k-picker-wrap, .k-dropdown-wrap, .k-link",B=g?"touchstart":"mousedown",C=a(document),D=a(window),E=a(document.documentElement),F="resize scroll",G=f.transitions.css,H=G+"transform",I=a.extend,J=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],L=e.extend({init:function(b,d){var f=this;e.fn.init.call(f,b,d),b=f.element,d=f.options,f.collisions=f.options.collision.split(" "),f.collisions.length===1&&f.collisions.push(f.collisions[0]),f.element.hide().addClass("k-popup k-group k-reset").css({position:q}).appendTo(a(d.appendTo)).bind("mouseenter mouseleave",function(a){f._hovered=a.type==="mouseenter"}),f.wrapper=a(),d.animation===!1&&(d.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),x in d.animation.close||(d.animation.close=I(!0,{reverse:!0},d.animation.open,d.animation.close)),I(d.animation.open,{complete:function(){f.wrapper.css({overflow:v})}}),I(d.animation.close,{complete:function(){f.wrapper.hide();var e=f.wrapper.data(t),g=a(d.anchor),h,i;e&&f.wrapper.css(e),d.anchor!=s&&(h=g.hasClass(z+"-down")?"down":"up",i=z+"-"+h,g.removeClass(i).children(A).removeClass(y).removeClass(i),b.removeClass(z+"-"+c.directions[h].reverse)),f._closing=!1}}),f._mousedownProxy=function(a){f._mousedown(a)},f._currentWidth=C.width(),f._resizeProxy=function(a){f._resize(a)},d.toggleTarget&&a(d.toggleTarget).bind(d.toggleEvent,a.proxy(f.toggle,f))},events:[j,k],options:{name:"Popup",toggleEvent:"click",origin:p+" "+m,position:o+" "+m,anchor:s,appendTo:s,collision:"flip fit",animation:{open:{effects:"slideIn:down",transition:!0,duration:200,show:!0},close:{duration:100,show:!1,hide:!0}}},open:function(){var b=this,d=b.element,e=b.options,h="down",i,k,l=a(e.anchor),m,n;if(!b.visible()){for(n=0;n<J.length;n++)m=J[n],d.css(m,l.css(m));if(d.data("animating")||b.trigger(j))return;E.unbind(B,b._mousedownProxy).bind(B,b._mousedownProxy),g||D.unbind(F,b._resizeProxy).bind(F,b._resizeProxy),b.wrapper=k=c.wrap(d).css({overflow:r,display:"block",position:q}),f.mobileOS.android&&k.add(l).css(H,"translatez(0)"),k.css(u),e.appendTo==s&&k.css(o,"-10000px"),i=I(!0,{},e.animation.open),i.effects=c.parseEffects(i.effects,b._update()),h=i.effects.slideIn?i.effects.slideIn.direction:h;if(e.anchor!=s){var p=z+"-"+h;d.addClass(z+"-"+c.directions[h].reverse),l.addClass(p).children(A).addClass(y).addClass(p)}d.data(x,i.effects).kendoStop(!0).kendoAnimate(i)}},toggle:function(){var a=this;a[a.visible()?k:j]()},visible:function(){return this.element.is(":"+v)},close:function(){var a=this,b=a.options,d,e;if(a.visible()){if(a._closing||a.trigger(k))return;E.unbind(B,a._mousedownProxy),D.unbind(F,a._resizeProxy),d=I(!0,{},b.animation.close),e=a.element.data(x),a.wrapper=c.wrap(a.element).css({overflow:r}),e&&(d.effects=e),a._closing=!0,a.element.kendoStop(!0).kendoAnimate(d)}},_resize:function(a){var b=this;if(i){var c=C.width();if(c==b._currentWidth)return;b._currentWidth=c}b._hovered||b.close()},_mousedown:function(b){var d=this,e=d.element[0],f=d.options,g=a(f.anchor)[0],h=f.toggleTarget,i=c.eventTarget(b),j=a(i).closest(".k-popup")[0];(!j||j===d.element[0])&&!K(e,i)&&!K(g,i)&&(!h||!K(a(h)[0],i))&&d.close()},_update:function(){return this._position(a(window))},_fit:function(a,b,c){var d=0;a+b>c&&(d=c-(a+b)),a<0&&(d=a);return d},_flip:function(a,b,c,d,e,f,g){var h=0;g=g||b,f!==e&&f!==l&&e!==l&&(a+g>d&&(h+=-(c+b)),a+h<0&&(h+=c+b));return h},_position:function(b){var c=this,d=c.element,e=c.wrapper,g=c.options,i=a(g.anchor),j=g.origin.toLowerCase().split(" "),k=g.position.toLowerCase().split(" "),l=c.collisions,m=f.zoomLevel(),n=10002,o=i.parents().filter(e.siblings());if(o[0]){var p=Number(a(o).css("zIndex"));p&&(n=p+1)}e.css("zIndex",n),g.appendTo===L.fn.options.appendTo?e.css(c._align(j,k)):e.css(c._align(j,k,!0));var q=h(e,u),r=h(e),s=i.offsetParent().parent(".k-animation-container");s.length&&s.data(w)&&(q=h(e,u),r=h(e)),r={top:r.top-(window.pageYOffset||document.documentElement.scrollTop||0),left:r.left-(window.pageXOffset||document.documentElement.scrollLeft||0)},c.wrapper.data(t)||e.data(t,I({},q));var v=I({},r),x=I({},q);l[0]==="fit"&&(x.top+=c._fit(v.top,e.outerHeight(),b.height()/m)),l[1]==="fit"&&(x.left+=c._fit(v.left,e.outerWidth(),b.width()/m)),x.left!=q.left||x.top!=q.top?e.data(w,!0):e.removeData(w);var y=I({},x);l[0]==="flip"&&(x.top+=c._flip(v.top,d.outerHeight(),i.outerHeight(),b.height()/m,j[0],k[0],e.outerHeight())),l[1]==="flip"&&(x.left+=c._flip(v.left,d.outerWidth(),i.outerWidth(),b.width()/m,j[1],k[1],e.outerWidth())),e.css(x);return x.left!=y.left||x.top!=y.top},_align:function(b,c,d){var e=this,f=e.wrapper,g=a(e.options.anchor),i=b[0],j=b[1],k=c[0],q=c[1],r=h(g),s=h(a(e.options.appendTo)),t=d?{top:r.top-s.top,left:r.left-s.left}:r,u=f.outerWidth(),v=f.outerHeight(),w=g.outerWidth(),x=g.outerHeight(),y=t.top,z=t.left,A=Math.round,B=i!==k,C=j!==q;i===o&&d&&B&&(y-=v),i===p&&!d&&(y+=x),i===l&&(y+=A(x/2)),k===o&&d&&B&&(y+=x),k===p&&!d&&(y-=v),k===l&&(y-=A(v/2)),j===m&&d&&C&&(z-=u),j===n&&!d&&(z+=w),j===l&&(z+=A(w/2)),q===m&&d&&C&&(z+=w),q===n&&!d&&(z-=u),q===l&&(z-=A(u/2));return{top:y,left:z}}});d.plugin(L)})(jQuery)