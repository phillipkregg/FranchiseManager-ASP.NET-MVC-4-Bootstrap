/*
* Kendo UI Web v2012.1.322 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at http://kendoui.com/web-license
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(a,b){function D(a,c){var d,e=c!==b;if(document.selection){a.focus();var d=document.selection.createRange();if(e)d.move("character",c),d.select();else{var f=a.createTextRange(),g=f.duplicate();f.moveToBookmark(d.getBookmark()),g.setEndPoint("EndToStart",f),c=g.text.length}}else a.selectionStart!==b&&(e?(a.focus(),a.setSelectionRange(c,c)):c=a.selectionStart);return c}function C(a,b){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-arrow-'+a+'" title="'+b+'">'+b+"</span></span>"}var c=window.kendo,d=c.keys,e=c.ui,f=e.Widget,g=c.parseFloat,h=c.support.touch,i="change",j="disabled",k="k-input",l="spin",m="touchend",n=h?"touchstart":"mousedown",o=h?"touchmove "+m:"mouseup mouseleave",p="k-hide-text",q="k-state-default",r="k-state-focused",s="k-state-hover",t="mouseenter mouseleave",u=".",v="k-state-selected",w="k-state-disabled",x=h?"number":"text",y=null,z=a.proxy,A={190:".",188:","},B=f.extend({init:function(a,d){var e=this,h=d&&d[l]!==b,i,j,l,m,n;f.fn.init.call(e,a,d),d=e.options,a=e.element.addClass(k).bind({keydown:z(e._keydown,e),paste:z(e._paste,e),blur:z(e._focusout,e)}),a.closest("form").bind("reset",function(){setTimeout(function(){e.value(a[0].value)})}),e._wrapper(),e._arrows(),e._input(),e._text.focus(z(e._click,e)),i=g(a.attr("min")),j=g(a.attr("max")),l=g(a.attr("step")),d.min===y&&i!==y&&(d.min=i),d.max===y&&j!==y&&(d.max=j),!h&&l!==y&&(d.step=l),n=d.format,n.slice(0,3)==="{0:"&&(d.format=n.slice(3,n.length-1)),m=d.value,e.value(m!==y?m:a.val()),e.enable(!a.is("[disabled]")),c.notify(e)},options:{name:"NumericTextBox",decimals:y,min:y,max:y,value:y,step:1,format:"n",placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[i,l],enable:function(a){var b=this,c=b._text.add(b.element),d=b._inputWrapper.unbind(t),e=b._upArrow.unbind(n),f=b._downArrow.unbind(n);b._toggleText(!0),a===!1?(d.removeClass(q).addClass(w),c.attr(j,j)):(d.addClass(q).removeClass(w).bind(t,b._toggleHover),c.removeAttr(j),e.bind(n,function(a){a.preventDefault(),b._spin(1),b._upArrow.addClass(v)}),f.bind(n,function(a){a.preventDefault(),b._spin(-1),b._downArrow.addClass(v)}))},value:function(a){var c=this,d;if(a===b)return c._value;a=g(a),d=c._adjust(a);a===d&&(c._update(a),c._old=c._value)},_adjust:function(a){var b=this,c=b.options,d=c.min,e=c.max;d!==y&&a<d?a=d:e!==y&&a>e&&(a=e);return a},_arrows:function(){var b=this,d,e=b.options,f=b.element;d=f.siblings(".k-icon"),d[0]||(d=a(C("up",e.upArrowText)+C("down",e.downArrowText)).insertAfter(f),d.wrapAll('<span class="k-select"/>')),d.bind(o,function(a){(!h||c.eventTarget(a)!=a.currentTarget||a.type===m)&&clearTimeout(b._spinning),d.removeClass(v)}),b._upArrow=d.eq(0),b._downArrow=d.eq(1)},_blur:function(){var a=this;a._toggleText(!0),a._change(a.element.val())},_click:function(a){var b=this;clearTimeout(b._focusing),b._focusing=setTimeout(function(){var c=a.target,d=D(c),e=c.value.substring(0,d),f=b._format(b.options.format),g=f[","],h=new RegExp("\\"+g,"g"),i=new RegExp("([\\d\\"+g+"]+)(\\"+f[u]+")?(\\d+)?"),j=i.exec(e),k=0;j&&(k=j[0].replace(h,"").length,e.indexOf("(")!=-1&&b._value<0&&k++),b._focusin(),D(b.element[0],k)})},_change:function(a){var b=this;b._update(a),a=b._value,b._old!=a&&(b._old=a,b.trigger(i),b.element.trigger(i))},_focusin:function(){var a=this;a._toggleText(!1),a.element.focus(),a._inputWrapper.addClass(r)},_focusout:function(){var a=this;a._inputWrapper.removeClass(r),a._blur()},_format:function(a){var b=this,d=b.options,e=c.culture().numberFormat;a.indexOf("c")>-1?e=e.currency:a.indexOf("p")>-1&&(e=e.percent);return e},_input:function(){var b=this,c="k-formatted-value",d=b.element.show()[0],e=b.wrapper,f;f=e.find(u+c),f[0]||(f=a("<input />").insertBefore(d).addClass(c)),d.type=x,f[0].type=x,f[0].style.cssText=d.style.cssText,b._text=f.attr("readonly",!0).addClass(d.className)},_keydown:function(a){var b=this,c=a.keyCode;c==d.DOWN?b._step(-1):c==d.UP?b._step(1):c==d.ENTER&&b._change(b.element.val()),b._prevent(c)&&!a.ctrlKey&&a.preventDefault()},_paste:function(a){var b=this,c=a.target,d=c.value;setTimeout(function(){g(c.value)===y&&b._update(d)})},_prevent:function(a){var b=this,c=b.element[0],e=c.value,f=b.options,g=f.min,h=b._format(f.format),i=h[u],j=f.decimals,k=D(c),l=!0,m;j===y&&(j=h.decimals),a>16&&a<21||a>32&&a<37||a>47&&a<58||a>95&&a<106||a==45||a==46||a==d.LEFT||a==d.RIGHT||a==d.TAB||a==d.BACKSPACE||a==d.ENTER?l=!1:A[a]===i&&j>0&&e.indexOf(i)==-1?l=!1:!(g===y||g<0)||e.indexOf("-")!=-1||a!=189&&a!=109||k!=0?a==110&&j>0&&e.indexOf(i)==-1&&(m=e.substring(k),c.value=e.substring(0,k)+i+m):l=!1;return l},_spin:function(a,b){var c=this;b=b||500,clearTimeout(c._spinning),c._spinning=setTimeout(function(){c._spin(a,50)},b),c._step(a)},_step:function(a){var b=this,c=b.element,d=g(c.val())||0;document.activeElement!=c[0]&&b._focusin(),d+=b.options.step*g(a),b._update(b._adjust(d)),b.trigger(l)},_toggleHover:function(b){h||a(b.currentTarget).toggleClass(s,b.type==="mouseenter")},_toggleText:function(a){var b=this;a=!!a,b._text.toggle(a),b.element.toggle(!a)},_update:function(a){var b=this,d=b.options,e=d.format,f=d.decimals,h=b._format(e),i;f===y&&(f=h.decimals),a=g(a),i=a!==y,i&&(a=parseFloat(a.toFixed(f))),b._value=a=b._adjust(a),b._text.val(i?c.toString(a,e):d.placeholder),b.element.val(i?a.toString().replace(u,h[u]):"")},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-numerictextbox"),d.is("span.k-numerictextbox")||(d=c.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),d=d.wrap("<span/>").parent()),d[0].style.cssText=c[0].style.cssText,c[0].style.width="",b.wrapper=d.addClass("k-widget k-numerictextbox").show(),b._inputWrapper=a(d[0].firstChild)}});e.plugin(B)})(jQuery)